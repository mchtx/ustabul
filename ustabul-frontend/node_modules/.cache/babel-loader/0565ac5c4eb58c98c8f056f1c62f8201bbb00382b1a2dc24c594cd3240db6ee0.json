{"ast":null,"code":"import axios from'axios';const API_URL=process.env.REACT_APP_API_URL||'http://localhost:8000/api';const api=axios.create({baseURL:API_URL,headers:{'Content-Type':'application/json'},withCredentials:true// Session cookies göndermek için\n});// CSRF token al\nconst getCsrfToken=()=>{const name='csrftoken';let cookieValue=null;if(document.cookie&&document.cookie!==''){const cookies=document.cookie.split(';');for(let i=0;i<cookies.length;i++){const cookie=cookies[i].trim();if(cookie.substring(0,name.length+1)===name+'='){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;};// Token ekle (olsa diye)\napi.interceptors.request.use(config=>{const token=localStorage.getItem('access_token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}// CSRF token ekle (POST, PUT, PATCH, DELETE için)\nconst csrfToken=localStorage.getItem('csrfToken')||getCsrfToken();if(csrfToken&&['post','put','patch','delete'].includes(config.method.toLowerCase())){config.headers['X-CSRFToken']=csrfToken;}return config;});// Users API\nexport const usersAPI={register:data=>api.post('/users/register/',data),login:(username,password)=>api.post('/users/login/',{username,password}),getProfile:()=>api.get('/users/me/'),changePassword:data=>api.post('/users/change_password/',data)};// Workshops API\nexport const workshopsAPI={getCategories:()=>api.get('/workshops/categories/'),getWorkshops:params=>api.get('/workshops/',{params}),getWorkshop:id=>api.get(\"/workshops/\".concat(id,\"/\")),myWorkshops:()=>api.get('/workshops/my_workshops/'),createWorkshop:data=>api.post('/workshops/',data),updateWorkshop:(id,data)=>api.patch(\"/workshops/\".concat(id,\"/\"),data)};// Reviews API\nexport const reviewsAPI={getReviews:workshopId=>api.get('/reviews/',{params:{workshop:workshopId}}),createReview:(workshopId,data)=>api.post('/reviews/',data,{params:{workshop:workshopId}}),replyReview:(reviewId,data)=>api.post(\"/reviews/\".concat(reviewId,\"/reply/\"),data)};// Messaging API\nexport const messagingAPI={getConversations:()=>api.get('/messaging/conversations/'),getConversation:id=>api.get(\"/messaging/conversations/\".concat(id,\"/\")),startConversation:data=>api.post('/messaging/conversations/start_conversation/',data),sendMessage:(conversationId,data)=>api.post(\"/messaging/conversations/\".concat(conversationId,\"/send_message/\"),data),markAsRead:conversationId=>api.post(\"/messaging/conversations/\".concat(conversationId,\"/mark_as_read/\"))};// Favorites API\nexport const favoritesAPI={getFavorites:()=>api.get('/users/favorites/'),addFavorite:workshopId=>api.post('/users/favorites/',{workshop:workshopId}),removeFavorite:favoriteId=>api.delete(\"/users/favorites/\".concat(favoriteId,\"/\"))};// Inventory API\nexport const inventoryAPI={getProducts:params=>api.get('/inventory/products/',{params}),createProduct:data=>api.post('/inventory/products/',data),updateProduct:(id,data)=>api.patch(\"/inventory/products/\".concat(id,\"/\"),data),getLowStockProducts:()=>api.get('/inventory/products/low_stock/'),createStockMovement:data=>api.post('/inventory/movements/',data)};// Payments API\nexport const paymentsAPI={getPlans:()=>api.get('/payments/plans/'),getSubscriptions:()=>api.get('/payments/subscriptions/'),subscribe:data=>api.post('/payments/subscriptions/subscribe/',data),cancelSubscription:id=>api.post(\"/payments/subscriptions/\".concat(id,\"/cancel/\")),getInvoices:()=>api.get('/payments/invoices/')};export default api;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","withCredentials","getCsrfToken","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","csrfToken","includes","method","toLowerCase","usersAPI","register","data","post","login","username","password","getProfile","get","changePassword","workshopsAPI","getCategories","getWorkshops","params","getWorkshop","id","myWorkshops","createWorkshop","updateWorkshop","patch","reviewsAPI","getReviews","workshopId","workshop","createReview","replyReview","reviewId","messagingAPI","getConversations","getConversation","startConversation","sendMessage","conversationId","markAsRead","favoritesAPI","getFavorites","addFavorite","removeFavorite","favoriteId","delete","inventoryAPI","getProducts","createProduct","updateProduct","getLowStockProducts","createStockMovement","paymentsAPI","getPlans","getSubscriptions","subscribe","cancelSubscription","getInvoices"],"sources":["C:/Users/mcht7/Desktop/TEZ AGENT/ustabul-frontend/src/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000/api';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  withCredentials: true, // Session cookies göndermek için\r\n});\r\n\r\n// CSRF token al\r\nconst getCsrfToken = () => {\r\n  const name = 'csrftoken';\r\n  let cookieValue = null;\r\n  if (document.cookie && document.cookie !== '') {\r\n    const cookies = document.cookie.split(';');\r\n    for (let i = 0; i < cookies.length; i++) {\r\n      const cookie = cookies[i].trim();\r\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return cookieValue;\r\n};\r\n\r\n// Token ekle (olsa diye)\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('access_token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  \r\n  // CSRF token ekle (POST, PUT, PATCH, DELETE için)\r\n  const csrfToken = localStorage.getItem('csrfToken') || getCsrfToken();\r\n  if (csrfToken && ['post', 'put', 'patch', 'delete'].includes(config.method.toLowerCase())) {\r\n    config.headers['X-CSRFToken'] = csrfToken;\r\n  }\r\n  \r\n  return config;\r\n});\r\n\r\n// Users API\r\nexport const usersAPI = {\r\n  register: (data) => api.post('/users/register/', data),\r\n  login: (username, password) => api.post('/users/login/', { username, password }),\r\n  getProfile: () => api.get('/users/me/'),\r\n  changePassword: (data) => api.post('/users/change_password/', data),\r\n};\r\n\r\n// Workshops API\r\nexport const workshopsAPI = {\r\n  getCategories: () => api.get('/workshops/categories/'),\r\n  getWorkshops: (params) => api.get('/workshops/', { params }),\r\n  getWorkshop: (id) => api.get(`/workshops/${id}/`),\r\n  myWorkshops: () => api.get('/workshops/my_workshops/'),\r\n  createWorkshop: (data) => api.post('/workshops/', data),\r\n  updateWorkshop: (id, data) => api.patch(`/workshops/${id}/`, data),\r\n};\r\n\r\n// Reviews API\r\nexport const reviewsAPI = {\r\n  getReviews: (workshopId) => api.get('/reviews/', { params: { workshop: workshopId } }),\r\n  createReview: (workshopId, data) => api.post('/reviews/', data, { params: { workshop: workshopId } }),\r\n  replyReview: (reviewId, data) => api.post(`/reviews/${reviewId}/reply/`, data),\r\n};\r\n\r\n// Messaging API\r\nexport const messagingAPI = {\r\n  getConversations: () => api.get('/messaging/conversations/'),\r\n  getConversation: (id) => api.get(`/messaging/conversations/${id}/`),\r\n  startConversation: (data) => api.post('/messaging/conversations/start_conversation/', data),\r\n  sendMessage: (conversationId, data) => api.post(`/messaging/conversations/${conversationId}/send_message/`, data),\r\n  markAsRead: (conversationId) => api.post(`/messaging/conversations/${conversationId}/mark_as_read/`),\r\n};\r\n\r\n// Favorites API\r\nexport const favoritesAPI = {\r\n  getFavorites: () => api.get('/users/favorites/'),\r\n  addFavorite: (workshopId) => api.post('/users/favorites/', { workshop: workshopId }),\r\n  removeFavorite: (favoriteId) => api.delete(`/users/favorites/${favoriteId}/`),\r\n};\r\n\r\n// Inventory API\r\nexport const inventoryAPI = {\r\n  getProducts: (params) => api.get('/inventory/products/', { params }),\r\n  createProduct: (data) => api.post('/inventory/products/', data),\r\n  updateProduct: (id, data) => api.patch(`/inventory/products/${id}/`, data),\r\n  getLowStockProducts: () => api.get('/inventory/products/low_stock/'),\r\n  createStockMovement: (data) => api.post('/inventory/movements/', data),\r\n};\r\n\r\n// Payments API\r\nexport const paymentsAPI = {\r\n  getPlans: () => api.get('/payments/plans/'),\r\n  getSubscriptions: () => api.get('/payments/subscriptions/'),\r\n  subscribe: (data) => api.post('/payments/subscriptions/subscribe/', data),\r\n  cancelSubscription: (id) => api.post(`/payments/subscriptions/${id}/cancel/`),\r\n  getInvoices: () => api.get('/payments/invoices/'),\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}