{"ast":null,"code":"import axios from 'axios';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000/api';\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  withCredentials: true // Session cookies göndermek için - ÖNEMLİ!\n});\n\n// CSRF token al\nconst getCsrfToken = () => {\n  const name = 'csrftoken';\n  let cookieValue = null;\n  if (document.cookie && document.cookie !== '') {\n    const cookies = document.cookie.split(';');\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      if (cookie.substring(0, name.length + 1) === name + '=') {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n};\n\n// Token ekle\napi.interceptors.request.use(config => {\n  // CSRF token ekle (POST, PUT, PATCH, DELETE için)\n  if (['post', 'put', 'patch', 'delete'].includes(config.method.toLowerCase())) {\n    const csrfToken = getCsrfToken();\n    if (csrfToken) {\n      config.headers['X-CSRFToken'] = csrfToken;\n      console.log('CSRF Token sent');\n    }\n  }\n  return config;\n});\n\n// Users API\nexport const usersAPI = {\n  register: data => api.post('/users/register/', data),\n  login: (username, password) => api.post('/users/login/', {\n    username,\n    password\n  }),\n  getProfile: () => api.get('/users/me/'),\n  changePassword: data => api.post('/users/change_password/', data)\n};\n\n// Workshops API\nexport const workshopsAPI = {\n  getCategories: () => api.get('/workshops/categories/'),\n  getWorkshops: params => api.get('/workshops/', {\n    params\n  }),\n  getWorkshop: id => api.get(`/workshops/${id}/`),\n  myWorkshops: () => api.get('/workshops/my_workshops/'),\n  createWorkshop: data => api.post('/workshops/', data),\n  updateWorkshop: (id, data) => api.patch(`/workshops/${id}/`, data)\n};\n\n// Reviews API\nexport const reviewsAPI = {\n  getReviews: workshopId => api.get('/reviews/', {\n    params: {\n      workshop: workshopId\n    }\n  }),\n  createReview: (workshopId, data) => api.post('/reviews/', data, {\n    params: {\n      workshop: workshopId\n    }\n  }),\n  replyReview: (reviewId, data) => api.post(`/reviews/${reviewId}/reply/`, data)\n};\n\n// Messaging API\nexport const messagingAPI = {\n  getConversations: () => api.get('/messaging/conversations/'),\n  getConversation: id => api.get(`/messaging/conversations/${id}/`),\n  startConversation: data => api.post('/messaging/conversations/start_conversation/', data),\n  sendMessage: (conversationId, data) => api.post(`/messaging/conversations/${conversationId}/send_message/`, data),\n  markAsRead: conversationId => api.post(`/messaging/conversations/${conversationId}/mark_as_read/`)\n};\n\n// Favorites API\nexport const favoritesAPI = {\n  getFavorites: () => api.get('/users/favorites/'),\n  addFavorite: workshopId => api.post('/users/favorites/', {\n    workshop: workshopId\n  }),\n  removeFavorite: favoriteId => api.delete(`/users/favorites/${favoriteId}/`)\n};\n\n// Inventory API\nexport const inventoryAPI = {\n  getProducts: params => api.get('/inventory/products/', {\n    params\n  }),\n  createProduct: data => api.post('/inventory/products/', data),\n  updateProduct: (id, data) => api.patch(`/inventory/products/${id}/`, data),\n  getLowStockProducts: () => api.get('/inventory/products/low_stock/'),\n  createStockMovement: data => api.post('/inventory/movements/', data)\n};\n\n// Payments API\nexport const paymentsAPI = {\n  getPlans: () => api.get('/payments/plans/'),\n  getSubscriptions: () => api.get('/payments/subscriptions/'),\n  subscribe: data => api.post('/payments/subscriptions/subscribe/', data),\n  cancelSubscription: id => api.post(`/payments/subscriptions/${id}/cancel/`),\n  getInvoices: () => api.get('/payments/invoices/')\n};\nexport default api;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","withCredentials","getCsrfToken","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","interceptors","request","use","config","includes","method","toLowerCase","csrfToken","console","log","usersAPI","register","data","post","login","username","password","getProfile","get","changePassword","workshopsAPI","getCategories","getWorkshops","params","getWorkshop","id","myWorkshops","createWorkshop","updateWorkshop","patch","reviewsAPI","getReviews","workshopId","workshop","createReview","replyReview","reviewId","messagingAPI","getConversations","getConversation","startConversation","sendMessage","conversationId","markAsRead","favoritesAPI","getFavorites","addFavorite","removeFavorite","favoriteId","delete","inventoryAPI","getProducts","createProduct","updateProduct","getLowStockProducts","createStockMovement","paymentsAPI","getPlans","getSubscriptions","subscribe","cancelSubscription","getInvoices"],"sources":["C:/Users/mcht7/Desktop/TEZ AGENT/ustabul-frontend/src/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000/api';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  withCredentials: true, // Session cookies göndermek için - ÖNEMLİ!\r\n});\r\n\r\n// CSRF token al\r\nconst getCsrfToken = () => {\r\n  const name = 'csrftoken';\r\n  let cookieValue = null;\r\n  if (document.cookie && document.cookie !== '') {\r\n    const cookies = document.cookie.split(';');\r\n    for (let i = 0; i < cookies.length; i++) {\r\n      const cookie = cookies[i].trim();\r\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return cookieValue;\r\n};\r\n\r\n// Token ekle\r\napi.interceptors.request.use((config) => {\r\n  // CSRF token ekle (POST, PUT, PATCH, DELETE için)\r\n  if (['post', 'put', 'patch', 'delete'].includes(config.method.toLowerCase())) {\r\n    const csrfToken = getCsrfToken();\r\n    if (csrfToken) {\r\n      config.headers['X-CSRFToken'] = csrfToken;\r\n      console.log('CSRF Token sent');\r\n    }\r\n  }\r\n  \r\n  return config;\r\n});\r\n\r\n// Users API\r\nexport const usersAPI = {\r\n  register: (data) => api.post('/users/register/', data),\r\n  login: (username, password) => api.post('/users/login/', { username, password }),\r\n  getProfile: () => api.get('/users/me/'),\r\n  changePassword: (data) => api.post('/users/change_password/', data),\r\n};\r\n\r\n// Workshops API\r\nexport const workshopsAPI = {\r\n  getCategories: () => api.get('/workshops/categories/'),\r\n  getWorkshops: (params) => api.get('/workshops/', { params }),\r\n  getWorkshop: (id) => api.get(`/workshops/${id}/`),\r\n  myWorkshops: () => api.get('/workshops/my_workshops/'),\r\n  createWorkshop: (data) => api.post('/workshops/', data),\r\n  updateWorkshop: (id, data) => api.patch(`/workshops/${id}/`, data),\r\n};\r\n\r\n// Reviews API\r\nexport const reviewsAPI = {\r\n  getReviews: (workshopId) => api.get('/reviews/', { params: { workshop: workshopId } }),\r\n  createReview: (workshopId, data) => api.post('/reviews/', data, { params: { workshop: workshopId } }),\r\n  replyReview: (reviewId, data) => api.post(`/reviews/${reviewId}/reply/`, data),\r\n};\r\n\r\n// Messaging API\r\nexport const messagingAPI = {\r\n  getConversations: () => api.get('/messaging/conversations/'),\r\n  getConversation: (id) => api.get(`/messaging/conversations/${id}/`),\r\n  startConversation: (data) => api.post('/messaging/conversations/start_conversation/', data),\r\n  sendMessage: (conversationId, data) => api.post(`/messaging/conversations/${conversationId}/send_message/`, data),\r\n  markAsRead: (conversationId) => api.post(`/messaging/conversations/${conversationId}/mark_as_read/`),\r\n};\r\n\r\n// Favorites API\r\nexport const favoritesAPI = {\r\n  getFavorites: () => api.get('/users/favorites/'),\r\n  addFavorite: (workshopId) => api.post('/users/favorites/', { workshop: workshopId }),\r\n  removeFavorite: (favoriteId) => api.delete(`/users/favorites/${favoriteId}/`),\r\n};\r\n\r\n// Inventory API\r\nexport const inventoryAPI = {\r\n  getProducts: (params) => api.get('/inventory/products/', { params }),\r\n  createProduct: (data) => api.post('/inventory/products/', data),\r\n  updateProduct: (id, data) => api.patch(`/inventory/products/${id}/`, data),\r\n  getLowStockProducts: () => api.get('/inventory/products/low_stock/'),\r\n  createStockMovement: (data) => api.post('/inventory/movements/', data),\r\n};\r\n\r\n// Payments API\r\nexport const paymentsAPI = {\r\n  getPlans: () => api.get('/payments/plans/'),\r\n  getSubscriptions: () => api.get('/payments/subscriptions/'),\r\n  subscribe: (data) => api.post('/payments/subscriptions/subscribe/', data),\r\n  cancelSubscription: (id) => api.post(`/payments/subscriptions/${id}/cancel/`),\r\n  getInvoices: () => api.get('/payments/invoices/'),\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}